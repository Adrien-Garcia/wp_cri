!function(t){"use strict";function e(){return t(".tx-editor-overlay").length>0}function i(e){var i=(t(window).height()-e.height())/2,o=(t(window).width()-e.width())/2;e.css({top:i,left:o})}function o(t,o){i(o),e()?t.focus():(t.focus(),o.css("opacity",1))}function n(e,i){var o,n;for(this.$el=t(e),this.settings={overlay:!0,maxWidth:"",maxHeight:"",key:null},n=0;n<this.bindMethods.length;n++)o=this.bindMethods[n],this[o]=t.proxy(this,o);this.init(i)}n.prototype.$el=null,n.prototype.$widget=null,n.prototype.$editor=null,n.prototype.$icon=null,n.prototype.init=function(i){var o;if(this.settings=t.extend(!0,this.settings,i),!this.$el.is("textarea"))return void t.error("Error initializing Textarea Fullscreen Editor Plugin. It can only work on <textarea> element.");o='<div class="tx-editor-wrapper"><div class="tx-editor"><a href="#" class="tx-icon"></a></div></div>',this.$wrapper=t(o).insertAfter(this.$el),this.$editor=this.$wrapper.find(".tx-editor"),this.$icon=this.$editor.find(".tx-icon"),this.$editor.append(this.$el),this.$el.css({width:"100%",height:"100%",resize:"none"});var n=this;null!==this.settings.key&&this.$wrapper.on("keyup",function(t){!t.ctrlKey||String.fromCharCode(t.which)!=n.settings.key.toUpperCase()&&String.fromCharCode(t.which)!=n.settings.key||(e()?n.minimize():n.expand())}),this.$icon.on("click.txeditor.icon",this.onIconClick)},n.prototype.bindMethods=["onOverlayClick","onIconClick","onKeyUp","onResize"],n.prototype.showOverlay=function(){return t('<div class="tx-editor-overlay" />').appendTo("body").fadeTo(0,1).click(this.onOverlayClick),this},n.prototype.removeOverlay=function(){var e=t(".tx-editor-overlay");return e.length&&e.fadeTo(0,0,function(){t(this).remove()}),this},n.prototype.expand=function(){var e=this.settings,i=this.$editor;return e.maxWidth&&i.css("max-width",e.maxWidth),e.maxHeight&&i.css("max-height",e.maxHeight),e.overlay&&this.showOverlay(),i.addClass("expanded"),o(this.$el,this.$editor),t(window).on("resize.txeditor",this.onResize),t(window).on("keyup.txeditor",this.onKeyUp),this},n.prototype.minimize=function(){var e=this.settings,i=this.$editor;return t(window).off("resize.txeditor",this.onResize),t(window).off("keyup.txeditor",this.onKeyUp),i.removeClass("expanded").css({"max-width":"none","max-height":"none"}),o(this.$el,i),e.overlay&&this.removeOverlay(),this},n.prototype.destroy=function(){var e=this.$wrapper;return this.removeOverlay(),this.$el=this.$el.detach(),this.$el.insertBefore(e),e.remove(),this.$wrapper=null,this.$icon=null,this.$editor=null,t(window).off("keyup.txeditor",this.onKeyUp).off("resize.txeditor",this.onResize),this},n.prototype.onOverlayClick=function(){this.minimize()},n.prototype.onIconClick=function(t){t.preventDefault(),e()?this.minimize():this.expand()},n.prototype.onKeyUp=function(t){27===t.keyCode&&e()&&this.minimize()},n.prototype.onResize=function(t){i(this.$editor)},t.fn.textareafullscreen=function(e){return this.each(function(){var i,o,r=t(this);if("string"==typeof e){if(i=r.data("textareafullscreendata"),"function"==typeof i[e])return o=Array.prototype.slice.call(arguments,1),i[e].apply(i,o);t.error("Method "+e+" does not exist on jQuery.textareafullscreen")}else r.data("textareafullscreendata",new n(this,e))})}}(jQuery);